<!DOCTYPE html>
<html prefix="" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="a caveat to the tsql `between`">
<meta name="viewport" content="width=device-width">
<title>is tsql's `between` inclusive? | hiroto's things</title>
<link href="../../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/dark.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Share+Tech+Mono" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="https://rodigu.github.io/posts/data-sci/tsql-between/">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="rodigu">
<link rel="prev" href="../../reading/thoreau-walden-31/" title="thoreau; walden; 31" type="text/html">
<link rel="next" href="../../linux/arch-missing-packages/" title="missing packages on arch" type="text/html">
<meta property="og:site_name" content="hiroto's things">
<meta property="og:title" content="is tsql's `between` inclusive?">
<meta property="og:url" content="https://rodigu.github.io/posts/data-sci/tsql-between/">
<meta property="og:description" content="a caveat to the tsql `between`">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2025-12-16T17:10:00-03:00">
<meta property="article:tag" content="databases">
<meta property="article:tag" content="sql">
</head>
<body class="hack dark">

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
         
    <header id="header"><h1 id="brand"><a href="../../../" title="hiroto's things" rel="home">

        <span id="blog-title">hiroto's things</span>
    </a></h1>

        

        
    <nav id="menu"><ul>
<li><a href="../../../categories/cat_reading/">reading</a></li>
                <li><a href="../../../categories/cat_linux/">linux</a></li>
                <li><a href="../../../categories/cat_data-sci/">data science</a></li>
                <li><a href="../../../categories/cat_photo-journal/">photo journal</a></li>
                <li><a href="../../../rss.xml">rss</a></li>
                <li><a href="../../../pages/about/index.html">about</a></li>

    

    
    
    </ul></nav></header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">is tsql's `between` inclusive?</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    rodigu
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2025-12-16T17:10:00-03:00" itemprop="datePublished" title="2025-12-16 17:10">2025-12-16 17:10</time></a>
            </p>
                <p class="commentline">
    
        <a href="#utterances-thread">Comments</a>


            
        </p>
<p class="sourceline"><a href="index.md" class="sourcelink">Source</a></p>

                    <p class="linkline"><a href="https://rodigu.github.io/">Original site</a></p>
        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>microsoft's <a href="https://learn.microsoft.com/en-us/sql/t-sql/language-elements/between-transact-sql?view=sql-server-ver17" target="_blank">documentation for between</a> doesn't mention inclusivity <em>at all</em> until <a href="https://learn.microsoft.com/en-us/sql/t-sql/language-elements/between-transact-sql?view=sql-server-ver17#b-use--and--instead-of-between" target="_blank">section b</a>, which suggests that <code>between</code> is inclusive. the information is only really <em>explicitly</em> stated all the way down in <a href="https://learn.microsoft.com/en-us/sql/t-sql/language-elements/between-transact-sql?view=sql-server-ver17#d-use-between-with-datetime-values" target="_blank">section d</a>, where it states that (for datetime values, at least), <code>between</code> is inclusive.</p>
<p>however, as i have come to find out (not before a whole hour of debugging): it ... depends?</p>
<h3>context</h3>
<p>lets create a table with two columns.
<code>date_vc</code> is a <code>varchar</code> that follows the formatting <code>'%d/%m/%Y'</code> (as per the usual cron formatting<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">1</a></sup>).
<code>date_dt</code> is a <code>datetime</code> column.</p>
<p>this was an issue i ran into at work, involving real data.
here, i'll demonstrate it with a sample table.</p>
<p>here is a sample sql script to create the tables and insert some values into them.</p>
<div class="code"><pre class="code literal-block"><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tsql_testing</span><span class="p">(</span>
<span class="w">    </span><span class="p">[</span><span class="n">date_vc</span><span class="p">]</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span>
<span class="w">    </span><span class="p">[</span><span class="n">date_dt</span><span class="p">]</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span>
<span class="p">)</span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tsql_testing</span><span class="w"> </span><span class="p">(</span><span class="n">date_vc</span><span class="p">,</span><span class="w"> </span><span class="n">date_dt</span><span class="p">)</span>
<span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">'15/12/2025'</span><span class="p">,</span><span class="w"> </span><span class="s1">'2025-12-15 23:48:13.000'</span><span class="p">)</span>
<span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">tsql_testing</span><span class="w"> </span><span class="p">(</span><span class="n">date_vc</span><span class="p">,</span><span class="w"> </span><span class="n">date_dt</span><span class="p">)</span>
<span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="s1">'09/12/2025'</span><span class="p">,</span><span class="w"> </span><span class="s1">'2025-12-09 23:48:13.000'</span><span class="p">)</span>
</pre></div>

<p>now, notice that, as previously mentioned, <code>date_vc</code> has string values with style 103 (<code>'%d/%m/%Y'</code>),
the British/French standard as per <a href="https://learn.microsoft.com/en-us/sql/t-sql/functions/cast-and-convert-transact-sql?view=sql-server-ver17#date-and-time-styles" target="_blank">microsoft's own documentation</a>.</p>
<h3>between is (not?) inclusive</h3>
<p>if we try to select the following using <code>between</code>, what should be the expected behavior?</p>
<div class="code"><pre class="code literal-block"><span class="k">select</span><span class="w"> </span><span class="n">date_vc</span><span class="p">,</span><span class="w"> </span><span class="n">date_dt</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tsql_testing</span>
<span class="k">where</span><span class="w"> </span><span class="k">convert</span><span class="p">(</span><span class="n">datetime</span><span class="p">,</span><span class="n">date_vc</span><span class="p">,</span><span class="mi">103</span><span class="p">)</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="s1">'2025-12-09'</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="s1">'2025-12-15'</span><span class="p">;</span>
</pre></div>

<p>we convert the <code>varchar</code> column <code>date_vc</code> to datetime, and select between those two dates.</p>
<p>as alluded to in microsoft's own documentation, we do get that this between select is indeed inclusive, as we fetch the following from the select:</p>
<blockquote>
<table>
<thead><tr>
<th>date_vc</th>
<th>date_dt</th>
</tr></thead>
<tbody>
<tr>
<td>09/12/2025</td>
<td>2025-12-09 23:48:13.000</td>
</tr>
<tr>
<td>15/12/2025</td>
<td>2025-12-15 23:48:13.000</td>
</tr>
</tbody>
</table>
</blockquote>
<p>note that, even if we were to use the 103 standard with <code>between '12/09/2025' and '12/15/2025'</code>, we'd still get the same response.</p>
<p>now, if we do the <strong><em>exact same select</em></strong> for the <code>datetime</code> column <code>date_dt</code> (again, it doesn't matter which standard and formatting you pick):</p>
<div class="code"><pre class="code literal-block"><span class="k">select</span><span class="w"> </span><span class="n">date_vc</span><span class="p">,</span><span class="w"> </span><span class="n">date_dt</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">tsql_testing</span>
<span class="k">where</span><span class="w"> </span><span class="n">date_dt</span><span class="w"> </span><span class="k">between</span><span class="w"> </span><span class="s1">'12/09/2025'</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="s1">'12/15/2025'</span>
</pre></div>

<p>we get a response non-inclusive of the second value:</p>
<blockquote>
<table>
<thead><tr>
<th>date_vc</th>
<th>date_dt</th>
</tr></thead>
<tbody><tr>
<td>09/12/2025</td>
<td>2025-12-09 23:48:13.000</td>
</tr></tbody>
</table>
</blockquote>
<p>is this a quirk of tsql? or is this also in other sql dialects?</p>
<h3>a rant</h3>
<p>it is a tremendously unpleasant experience to find out that a bug derives not from a mistake i have made, bet from an <em>undocumented</em> issue from the tool i am using. all the more aggravating when this is not someone's foss passion project, but a prod tool by a massive tech company (which we pay good money to deploy on <em>their</em> azure servers). well, at least this is not as bad as powerbi.</p>
<div class="footnote">
<hr>
<ol>
<li id="fn:2">
<p>not entirely sure of the name. i have seen this formatting in different places, such as a <a href="https://docs.rs/chrono/latest/chrono/format/strftime/index.html" target="_blank">rust library</a> and the <a href="https://docs.python.org/3/library/datetime.html#strftime-and-strptime-format-codes" target="_blank">python standard library</a>, but i can't find a proper standards definition, nor the origin of this formatting convention. <a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 1 in the text">↩</a></p>
</li>
</ol>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/databases/" rel="tag">databases</a></li>
            <li><a class="tag p-category" href="../../../categories/sql/" rel="tag">sql</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../../reading/thoreau-walden-31/" rel="prev" title="thoreau; walden; 31">Previous post</a>
            </li>
            <li class="next">
                <a href="../../linux/arch-missing-packages/" rel="next" title="missing packages on arch">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
    
        <div data-title="is tsql's `between` inclusive?" id="utterances-thread"></div>
        <script src="https://utteranc.es/client.js" repo="rodigu/rodigu.github.io" issue-term="url" label="comment" theme="github-dark" crossorigin="anonymous"></script></section></article></main><footer id="footer"><p>Contents © 2026         <a href="mailto:rmoraisu@proton.me">rodigu</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    
    

    
    
    
</body>
</html>
